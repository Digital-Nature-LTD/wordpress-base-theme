{"version":3,"file":"digital-nature-frontend.js","sources":["../../../src/js/frontend/inc/lazy-load-videos.js"],"sourcesContent":["// add an intersection observer to switch in the video src attribute when it is nearly on screen\r\ndocument.addEventListener('DOMContentLoaded', function() {\r\n    const videos = document.querySelectorAll('video');\r\n\r\n    const config = { rootMargin: '200px', threshold: 0.01 };\r\n\r\n    const onIntersection = (entries, observer) => {\r\n        entries.forEach(entry => {\r\n            if (entry.isIntersecting) {\r\n                const video = entry.target;\r\n                const sources = video.querySelectorAll('source[data-src]');\r\n                let needsLoad = false;\r\n\r\n                sources.forEach(source => {\r\n                    if (!source.src) {\r\n                        source.src = source.getAttribute('data-src');\r\n                        needsLoad = true;\r\n                    }\r\n                });\r\n\r\n                if (needsLoad) {\r\n                    video.load();\r\n                }\r\n                observer.unobserve(video);\r\n            }\r\n        });\r\n    };\r\n\r\n    const observer = new IntersectionObserver(onIntersection, config);\r\n    videos.forEach(video => observer.observe(video));\r\n});"],"names":[],"mappings":";;;;;IAAA;IACA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,WAAW;IACzD,IAAI,MAAM,MAAM,GAAG,QAAQ,CAAC,gBAAgB,CAAC,OAAO,CAAC,CAAC;AACtD;IACA,IAAI,MAAM,MAAM,GAAG,EAAE,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;AAC5D;IACA,IAAI,MAAM,cAAc,GAAG,CAAC,OAAO,EAAE,QAAQ,KAAK;IAClD,QAAQ,OAAO,CAAC,OAAO,CAAC,KAAK,IAAI;IACjC,YAAY,IAAI,KAAK,CAAC,cAAc,EAAE;IACtC,gBAAgB,MAAM,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC;IAC3C,gBAAgB,MAAM,OAAO,GAAG,KAAK,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,CAAC;IAC3E,gBAAgB,IAAI,SAAS,GAAG,KAAK,CAAC;AACtC;IACA,gBAAgB,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI;IAC1C,oBAAoB,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;IACrC,wBAAwB,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;IACrE,wBAAwB,SAAS,GAAG,IAAI,CAAC;IACzC,oBAAoB,CAAC;IACrB,gBAAgB,CAAC,CAAC,CAAC;AACnB;IACA,gBAAgB,IAAI,SAAS,EAAE;IAC/B,oBAAoB,KAAK,CAAC,IAAI,EAAE,CAAC;IACjC,gBAAgB,CAAC;IACjB,gBAAgB,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;IAC1C,YAAY,CAAC;IACb,QAAQ,CAAC,CAAC,CAAC;IACX,IAAI,CAAC,CAAC;AACN;IACA,IAAI,MAAM,QAAQ,GAAG,IAAI,oBAAoB,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC;IACtE,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;IACrD,CAAC,CAAC;;;;;;"}